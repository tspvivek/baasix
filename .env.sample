#-----------------------------------
# Server
#-----------------------------------
PORT=8056
HOST=localhost
DEBUGGING=false

TEST_MODE=false

#100 requests per 5 seconds
RATE_LIMIT=250
#Five seconds
RATE_LIMIT_INTERVAL=5000

#-----------------------------------
# Socket
#-----------------------------------
SOCKET_ENABLED=true
SOCKET_EXCLUDE_COLLECTIONS="baasix_Roles,baasix_Permission,baasix_AuditLog,baasix_EmailLog"
SOCKET_CORS_ENABLED_ORIGINS="http://localhost:3000,http://localhost:8056"
SOCKET_PATH=/realtime

SOCKET_REDIS_ENABLED=false
SOCKET_REDIS_URL=redis://localhost:6379
SOCKET_REDIS_KEY=socket.io
#-----------------------------------
# Database
#-----------------------------------
DATABASE_URL="postgresql://username:password@localhost:5432/baasix"
DATABASE_MAX_RETRY=3
DATABASE_RETRY_INTERVAL=15000
DATABASE_POSTGIS=true
DATABASE_SSL_CERTIFICATE=false
DATABASE_SSL_REJECT_UNAUTHORIZED=false
#DEBUGGING should be true to see the query logs in the console
DATABASE_LOGGING=false

DATABASE_POOL_MAX=20
DATABASE_POOL_MIN=0
DATABASE_POOL_ACQUIRE=30000
DATABASE_POOL_IDLE=10000

DATABASE_READ_REPLICA_ENABLED=false
DATABASE_READ_REPLICA_URLS="postgresql://username:password@localhost:5432/baasix_r1?schema=public,postgresql://username:password@localhost:5432/baasix_r2?schema=public"
DATABASE_READ_REPLICA_POOL_MAX=20
DATABASE_READ_REPLICA_POOL_MIN=0
DATABASE_READ_REPLICA_POOL_ACQUIRE=30000
DATABASE_READ_REPLICA_POOL_IDLE=10000

#-----------------------------------
# Cache (CacheService Configuration)
#-----------------------------------
# Enable/disable caching
CACHE_ENABLED=true

# Cache adapter: 'memory' (in-memory), 'redis' (Redis/Valkey), or 'upstash' (Upstash Redis)
CACHE_ADAPTER=memory
# Sync interval for L1 ‚Üê L2 synchronization for roles, permissions and settings caches only (default: 5 seconds)
CACHE_SYNC_INTERVAL=5
# Cache strategy: 'explicit' (opt-in per query with .$withCache()) or 'all' (cache all queries)
CACHE_STRATEGY=explicit

# Default TTL (Time To Live) in seconds
CACHE_TTL=300

# Maximum cache size in GB (for in-memory adapter only)
CACHE_SIZE_GB=1

# Redis/Valkey connection URL (for redis adapter)
# CACHE_REDIS_URL=redis://localhost:6379

# Upstash Redis REST credentials (for upstash adapter)
# UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your-upstash-token

#-----------------------------------
# JWT
#-----------------------------------
SECRET_KEY=secretkey
ACCESS_TOKEN_EXPIRES_IN=31536000 #1 year

#-----------------------------------
# Multi-tenancy
#-----------------------------------
MULTI_TENANT=false
PUBLIC_REGISTRATION=true
#Below is the default role for the user when multi-tenancy is disabled and public registration is enabled
DEFAULT_ROLE_REGISTERED=user
#Below is the default allowed roles for the user when multi-tenancy is enabled and public registration is enabled
ALLOWED_ROLES_MULTI_TENANT="tenant1_admin,tenant2_admin,tenant1_user,tenant2_user,tenant_owner,tenant_manager,crm_receptionist,crm_engineer"
#List of tables that are not tenant-specific
TENANT_IGNORED_TABLES="country,currency"

#-----------------------------------
# STORAGE
#-----------------------------------
# ASSET_PROXY_ENABLED=true
# ASSET_SECURE_PROXY_URLS=video,audio          # Only videos and audio
# ASSET_SECURE_PROXY_URLS=image                # Only images
# ASSET_SECURE_PROXY_URLS=video,image,pdf      # Videos, images, and PDFs
ASSET_CACHE_DIR=../.cache
ASSET_CACHE_SIZE_GB=2.5

STORAGE_SERVICES_ENABLED="LOCAL,SPACES"
STORAGE_DEFAULT_SERVICE="SPACES"
STORAGE_TEMP_PATH="../.temp"

#Local
LOCAL_STORAGE_DRIVER=LOCAL
LOCAL_STORAGE_PATH="../uploads"

#Spaces
SPACES_STORAGE_DRIVER=S3
SPACES_STORAGE_ENDPOINT=ams3.digitaloceanspaces.com
SPACES_STORAGE_BUCKET=test_bucket
SPACES_STORAGE_ACCESS_KEY_ID=test_bucket_access_key
SPACES_STORAGE_SECRET_ACCESS_KEY=test_bucket_secret_access_key
SPACES_STORAGE_REGION=us-east-1

#-----------------------------------
# MAIL
#-----------------------------------

MAIL_SENDERS_ENABLED=GMAIL,SENDGRID

MAIL_DEFAULT_SENDER=SENDGRID

# Welcome email settings
SEND_WELCOME_EMAIL=true
WELCOME_EMAIL_SUBJECT="Welcome to our platform!"

GMAIL_SMTP_HOST=smtp.gmail.com
GMAIL_SMTP_PORT=587
GMAIL_SMTP_SECURE=false
GMAIL_SMTP_USER=your_gmail_username
GMAIL_SMTP_PASS=your_gmail_password
GMAIL_FROM_ADDRESS="Your Name" <your_email@gmail.com>

SENDGRID_SMTP_HOST=smtp.elasticemail.com
SENDGRID_SMTP_PORT=2525
SENDGRID_SMTP_SECURE=false
SENDGRID_SMTP_USER=noreply@baasix.com
SENDGRID_SMTP_PASS=XXXXXXXXXXXXX
SENDGRID_FROM_ADDRESS="BAASIX" <noreply@baasix.com>


#-----------------------------------
# CORS
#-----------------------------------
# Comma-separated list of allowed origins
AUTH_CORS_ALLOWED_ORIGINS="http://localhost:3000,http://localhost:8056"
# Allow any port for all allowed origins (true/false)
AUTH_CORS_ALLOW_ANY_PORT=true
# Allow credentials in CORS requests (true/false)
AUTH_CORS_CREDENTIALS=true

#-----------------------------------
# COOKIES
#-----------------------------------
# Cookie security settings
AUTH_COOKIE_HTTP_ONLY=true
AUTH_COOKIE_SECURE=false
AUTH_COOKIE_SAME_SITE=lax
AUTH_COOKIE_PATH=/
# AUTH_COOKIE_DOMAIN=.yourdomain.com

#-----------------------------------
# AUTH
#-----------------------------------
AUTH_SERVICES_ENABLED=LOCAL,GOOGLE,FACEBOOK,APPLE
AUTH_APP_URL="http://localhost:3000,http://localhost:8056"

#Google
GOOGLE_AUTH_CLIENT_ID=your_google_client_id
GOOGLE_AUTH_CLIENT_SECRET=your_google_client_secret

#Facebook
FACEBOOK_AUTH_CLIENT_ID=your_facebook_client_id
FACEBOOK_AUTH_CLIENT_SECRET=your_facebook_client_secret

#Apple
APPLE_AUTH_CLIENT_ID=your_apple_client_id
APPLE_AUTH_TEAM_ID=your_apple_team_id
APPLE_AUTH_KEY_ID=your_apple_key_id
APPLE_AUTH_PRIVATE_KEY_LOCATION=your_apple_private_key

#-----------------------------------
# OPENAPI
#-----------------------------------
OPENAPI_ENABLED=true
OPENAPI_INCLUDE_AUTH=true
OPENAPI_INCLUDE_MULTI_TENANT=true
OPENAPI_INCLUDE_SCHEMA=true
OPENAPI_INCLUDE_PERMISSIONS=true
OPENAPI_INCLUDE_SETTINGS=true
OPENAPI_INCLUDE_UTILS=true
OPENAPI_INCLUDE_NOTIFICATIONS=true

#-----------------------------------
# TASK QUEUE
#-----------------------------------
TASK_SERVICE_ENABLED=true #Enable/disable the TasksService (default: false)
TASK_LIST_REFRESH_INTERVAL=1800 #In seconds (30 minutes), Default: 30 seconds
TASK_SHUTDOWN_WAIT_TIME=60 #In seconds, Default: 30 seconds
