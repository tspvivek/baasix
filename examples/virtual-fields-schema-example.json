{
  "collectionName": "products",
  "schema": {
    "fields": {
      "id": {
        "type": "UUID",
        "primaryKey": true,
        "defaultValue": { "type": "UUIDV4" }
      },
      "name": {
        "type": "String",
        "allowNull": false
      },
      "price": {
        "type": "Decimal",
        "allowNull": false
      },
      "discount": {
        "type": "Integer",
        "allowNull": true,
        "defaultValue": 0,
        "description": "Discount percentage (0-100)"
      },
      "quantity": {
        "type": "Integer",
        "allowNull": false,
        "defaultValue": 0
      },
      "taxRate": {
        "type": "Decimal",
        "allowNull": false,
        "defaultValue": 0,
        "description": "Tax rate as percentage"
      },
      
      "__COMMENT_1__": "=== VIRTUAL/COMPUTED FIELDS ===",
      
      "discountedPrice": {
        "type": "VIRTUAL",
        "calculated": "price * (1 - discount / 100.0)",
        "description": "Price after discount"
      },
      
      "subtotal": {
        "type": "VIRTUAL",
        "calculated": "quantity * price * (1 - discount / 100.0)",
        "description": "Subtotal (quantity Ã— discounted price)"
      },
      
      "taxAmount": {
        "type": "VIRTUAL",
        "calculated": "(quantity * price * (1 - discount / 100.0)) * (tax_rate / 100.0)",
        "description": "Tax amount"
      },
      
      "total": {
        "type": "VIRTUAL",
        "calculated": "(quantity * price * (1 - discount / 100.0)) * (1 + tax_rate / 100.0)",
        "description": "Total amount including tax"
      },
      
      "displayName": {
        "type": "VIRTUAL",
        "calculated": "'Product: ' || name || ' (Qty: ' || quantity || ')'",
        "description": "Formatted display name with quantity"
      },
      
      "status": {
        "type": "VIRTUAL",
        "calculated": "CASE WHEN quantity > 10 THEN 'In Stock' WHEN quantity > 0 THEN 'Low Stock' ELSE 'Out of Stock' END",
        "description": "Stock status based on quantity"
      },
      
      "createdAt": {
        "type": "DateTime",
        "defaultValue": { "type": "NOW" }
      },
      "updatedAt": {
        "type": "DateTime",
        "defaultValue": { "type": "NOW" }
      }
    }
  }
}
